---
title: "Patrick's Auto Shop Productivity Report"
subtitle: "Where Should You Spend Your Time?"
author: "Abbonizio Business Analytics Consulting LLC"
date: today
format:
  html:
    theme: flatly
    toc: true
    toc-depth: 2
    code-fold: true
    code-summary: "Show code"
execute:
  echo: false
  warning: false
  message: false
---

```{python}
#| include: false
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# Set style
plt.style.use('seaborn-v0_8-whitegrid')
sns.set_palette("husl")

# Load data
carsDF = pd.read_csv("carsFixed.csv")

# Create descriptive labels
carsDF['Shop'] = 'Shop ' + carsDF['shopID'].astype(str)
carsDF['Boss Present'] = carsDF['boss'].map({0: 'You Away', 1: 'You Present'})

# Calculate summary stats
summary = carsDF.groupby(['shopID', 'boss'])['carsFixed'].agg(['mean', 'std', 'count']).reset_index()
summary_pivot = summary.pivot(index='shopID', columns='boss', values='mean')
summary_pivot.columns = ['Boss Away', 'Boss Present']
summary_pivot['Boost'] = summary_pivot['Boss Present'] - summary_pivot['Boss Away']

# Calculate confidence intervals (95%)
def calc_ci(group):
    n = len(group)
    mean = group.mean()
    std = group.std()
    se = std / np.sqrt(n)
    ci = 1.96 * se
    return pd.Series({'mean': mean, 'ci': ci, 'n': n})

boss_stats = carsDF.groupby(['shopID', 'boss'])['carsFixed'].apply(calc_ci).unstack()
```

## The Bottom Line üéØ

**Patrick, here's what your data tells us:** Your presence at the shop matters most at **Shop 4** and **Shop 1**. When you're there, these shops fix significantly more cars. Some other shops? They do just fine without you.

**Our recommendation:** Focus your time on **Shop 4** and **Shop 1**. Your brother's shop (Shop 3) shows the least benefit from your presence. Shop 2 shows promise but needs more data to confirm.

---

## What the Data Shows

We analyzed 250 days of productivity data across your 5 shops. Here's every single day plotted‚Äîyou can see the pattern clearly:

```{python}
#| fig-cap: "Each dot is one day. Green = you were there. Orange = you were away."
#| fig-width: 8
#| fig-height: 6

fig, ax = plt.subplots(figsize=(8, 6))

# Add jitter for better visibility
np.random.seed(42)
jitter = 0.15

colors = {'You Away': '#E67E22', 'You Present': '#27AE60'}

for boss_label, color in colors.items():
    mask = carsDF['Boss Present'] == boss_label
    data = carsDF[mask]
    x = data['shopID'] + np.random.uniform(-jitter, jitter, len(data))
    ax.scatter(x, data['carsFixed'], alpha=0.6, s=60, c=color, 
               label=boss_label, edgecolors='white', linewidth=0.5)

ax.set_xlabel('Shop Number', fontsize=12, fontweight='bold')
ax.set_ylabel('Cars Fixed That Day', fontsize=12, fontweight='bold')
ax.set_title('Daily Productivity: All 250 Days Across Your 5 Shops', fontsize=14, fontweight='bold')
ax.set_xticks([1, 2, 3, 4, 5])
ax.set_xticklabels(['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5'])
ax.legend(title='Your Presence', loc='upper left', frameon=True)
ax.set_ylim(0, 75)

plt.tight_layout()
plt.show()
```

**What you see:** Shop 1 has a huge spread‚Äîsome low days when you're away, but much better when you're there. Shop 4 also shows improvement with you present. But look at Shop 5: the green and orange dots overlap completely‚Äîyour presence doesn't change much there.

---

## 3D View: Shop Performance Landscape

Here's an interactive 3D perspective showing all three dimensions at once‚ÄîShop ID, your presence status, and cars fixed:

```{python}
#| fig-cap: "3D visualization: Shop ID √ó Boss Presence √ó Cars Fixed"
#| fig-width: 10
#| fig-height: 8

from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure(figsize=(10, 8))
ax = fig.add_subplot(111, projection='3d')

# Add jitter for better visibility
np.random.seed(42)
jitter_x = 0.1
jitter_y = 0.05

# Create colors based on boss presence
colors_3d = ['#E67E22' if b == 0 else '#27AE60' for b in carsDF['boss']]

# Add jittered positions (flip boss so Present is at y=0, Away is at y=1)
x_jittered = carsDF['shopID'] + np.random.uniform(-jitter_x, jitter_x, len(carsDF))
y_jittered = (1 - carsDF['boss']) + np.random.uniform(-jitter_y, jitter_y, len(carsDF))

# Create the 3D scatter plot
scatter = ax.scatter(x_jittered, y_jittered, carsDF['carsFixed'], 
                     c=colors_3d, s=60, alpha=0.7, edgecolors='white', linewidth=0.5)

# Set labels
ax.set_xlabel('\nShop ID', fontsize=11, fontweight='bold')
ax.set_ylabel('\nBoss Presence', fontsize=11, fontweight='bold')
ax.set_zlabel('\nCars Fixed', fontsize=11, fontweight='bold')
ax.set_title('3D View: Productivity by Shop and Boss Presence', fontsize=14, fontweight='bold', pad=20)

# Set tick labels
ax.set_xticks([1, 2, 3, 4, 5])
ax.set_xticklabels(['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5'])
ax.set_yticks([0, 1])
ax.set_yticklabels(['Present', 'Away'])

# Add mean surfaces/bars for each shop-boss combination (flip y so Present is at 0, Away at 1)
for shop in range(1, 6):
    for boss in [0, 1]:
        mean_cars = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == boss)]['carsFixed'].mean()
        color = '#E67E22' if boss == 0 else '#27AE60'
        y_pos = 1 - boss  # Flip: boss=1 (Present) goes to y=0, boss=0 (Away) goes to y=1
        ax.bar3d(shop - 0.2, y_pos - 0.1, 0, 0.4, 0.2, mean_cars, 
                 color=color, alpha=0.3, edgecolor='black', linewidth=0.5)

# Create custom legend
from matplotlib.lines import Line2D
legend_elements = [Line2D([0], [0], marker='o', color='w', markerfacecolor='#E67E22', 
                          markersize=10, label='Boss Away'),
                   Line2D([0], [0], marker='o', color='w', markerfacecolor='#27AE60', 
                          markersize=10, label='Boss Present')]
ax.legend(handles=legend_elements, loc='upper left', fontsize=10)

# Adjust view angle for better visualization
ax.view_init(elev=20, azim=45)

plt.tight_layout()
plt.show()
```

**Reading this 3D chart:** The vertical bars show the average cars fixed for each shop-boss combination, while the scattered dots are individual daily observations. Notice how Shop 1 and Shop 4 show the biggest vertical gaps between the orange (away) and green (present) bars‚Äîthat's your impact visualized in 3D space.

---

## The "Boss Boost" Effect

Here's the real question: **How many extra cars get fixed when you're at each shop?**

```{python}
#| fig-cap: "The 'Boss Boost'‚Äîextra cars fixed when you're present vs. away"
#| fig-width: 9
#| fig-height: 5

# Calculate boost with confidence intervals
boosts = []
for shop in range(1, 6):
    present = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 1)]['carsFixed']
    away = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 0)]['carsFixed']
    
    boost = present.mean() - away.mean()
    # Bootstrap-like SE estimate
    se_present = present.std() / np.sqrt(len(present))
    se_away = away.std() / np.sqrt(len(away))
    se_diff = np.sqrt(se_present**2 + se_away**2)
    ci = 1.96 * se_diff
    
    boosts.append({'Shop': f'Shop {shop}', 'Boost': boost, 'CI': ci})

boost_df = pd.DataFrame(boosts)

fig, ax = plt.subplots(figsize=(9, 5))

# Color bars by positive/negative boost
colors_bars = ['#27AE60' if b > 2 else '#E67E22' if b < 0 else '#95A5A6' for b in boost_df['Boost']]

bars = ax.bar(boost_df['Shop'], boost_df['Boost'], color=colors_bars, edgecolor='black', linewidth=1.2)
ax.errorbar(boost_df['Shop'], boost_df['Boost'], yerr=boost_df['CI'], fmt='none', 
            color='black', capsize=5, capthick=2, linewidth=2)

ax.axhline(y=0, color='black', linestyle='-', linewidth=1)
ax.set_ylabel('Extra Cars Fixed Per Day\n(When You\'re Present)', fontsize=11, fontweight='bold')
ax.set_xlabel('', fontsize=11)
ax.set_title('Your Impact: The "Boss Boost" at Each Shop', fontsize=14, fontweight='bold')

# Add value labels below the bars
for bar, boost, ci in zip(bars, boost_df['Boost'], boost_df['CI']):
    height = bar.get_height()
    label = f'+{height:.1f}' if height > 0 else f'{height:.1f}'
    ax.annotate(label, xy=(bar.get_x() + bar.get_width()/2, 0),
                xytext=(0, -8), textcoords='offset points',
                ha='center', va='top', fontsize=12, fontweight='bold')

ax.set_ylim(-5, 25)
plt.tight_layout()
plt.show()
```

**Key Findings:**

| Shop | Extra Cars/Day | What This Means |
|------|----------------|-----------------|
| **Shop 4** | **+12.6** | üåü **Biggest impact!** Your presence makes a huge difference |
| **Shop 2** | **+10.1** | üåü **Big impact!** But only 5 days of data‚Äîneeds more tracking |
| Shop 5 | +8.8 | Strong boost, this shop responds well to your presence |
| Shop 1 | +7.0 | Solid impact‚Äîdefinitely worth your time |
| Shop 3 | +3.4 | Small boost‚Äîyour brother's shop does okay either way |

---

## How Confident Can You Be?

**The honest truth:** We only have 250 days of data, and you weren't at every shop equally. Here's what that means:

```{python}
#| fig-cap: "Sample sizes and reliability of our estimates"
#| fig-width: 6
#| fig-height: 3

# Sample size breakdown
sample_sizes = carsDF.groupby(['Shop', 'Boss Present']).size().unstack()

fig, axes = plt.subplots(1, 2, figsize=(6, 3))

# Left plot: Sample sizes
ax1 = axes[0]
x = np.arange(5)
width = 0.35

away_counts = carsDF[carsDF['boss'] == 0].groupby('shopID').size().values
present_counts = carsDF[carsDF['boss'] == 1].groupby('shopID').size().values

bars1 = ax1.bar(x - width/2, away_counts, width, label='You Away', color='#E67E22', edgecolor='black')
bars2 = ax1.bar(x + width/2, present_counts, width, label='You Present', color='#27AE60', edgecolor='black')

ax1.set_ylabel('Number of Days', fontweight='bold')
ax1.set_xlabel('')
ax1.set_title('How Many Days of Data?', fontweight='bold')
ax1.set_xticks(x)
ax1.set_xticklabels(['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5'])
ax1.legend()

# Add count labels
for bar in bars1:
    ax1.annotate(f'{int(bar.get_height())}', xy=(bar.get_x() + bar.get_width()/2, bar.get_height()),
                 xytext=(0, 3), textcoords='offset points', ha='center', fontsize=9)
for bar in bars2:
    ax1.annotate(f'{int(bar.get_height())}', xy=(bar.get_x() + bar.get_width()/2, bar.get_height()),
                 xytext=(0, 3), textcoords='offset points', ha='center', fontsize=9)

# Right plot: Confidence ranges
ax2 = axes[1]
for i, shop in enumerate(range(1, 6)):
    present = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 1)]['carsFixed']
    away = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 0)]['carsFixed']
    
    boost = present.mean() - away.mean()
    se_present = present.std() / np.sqrt(len(present))
    se_away = away.std() / np.sqrt(len(away))
    se_diff = np.sqrt(se_present**2 + se_away**2)
    ci = 1.96 * se_diff
    
    color = '#27AE60' if boost - ci > 0 else '#95A5A6'
    ax2.barh(i, boost, xerr=ci, color=color, edgecolor='black', capsize=5, height=0.6)

ax2.axvline(x=0, color='red', linestyle='--', linewidth=2, label='No effect')
ax2.set_yticks(range(5))
ax2.set_yticklabels(['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5'])
ax2.invert_yaxis()  # Shop 1 at top, Shop 5 at bottom
ax2.set_xlabel('Extra Cars Fixed (95% confidence range)', fontweight='bold', fontsize=8)
ax2.set_title('How Sure Are We?', fontweight='bold')

plt.tight_layout()
plt.show()
```

**Reading this chart:**

- **Green bars** = We're pretty confident your presence helps (the error bar doesn't cross zero)
- **Gray bars** = We're less certain (could go either way with more data)
- **Red dashed line** = Zero effect

**What you can trust:**

- ‚úÖ **Shop 1 & Shop 4:** These boosts are real. The data is solid.
- ‚ö†Ô∏è **Shop 2:** Shows a boost, but we only have 5 days of you being there. Need more data.
- ‚ö†Ô∏è **Shops 3 & 5:** Benefits are smaller and less certain.

---

## The Money Question üí∞

Let's say each car fixed earns you **$200 in profit**. Here's what different scheduling strategies could mean for your wallet:

```{python}
#| fig-cap: "Extra monthly profit above baseline under different scheduling strategies"
#| fig-width: 9
#| fig-height: 7

# Calculate average daily productivity for each scenario
avg_without_boss = carsDF[carsDF['boss'] == 0].groupby('shopID')['carsFixed'].mean()
avg_with_boss = carsDF[carsDF['boss'] == 1].groupby('shopID')['carsFixed'].mean()

# Assume 22 working days per month, Patrick can visit 1 shop per day
profit_per_car = 200

# Calculate baseline monthly profit (all 5 shops operating without boss visits)
baseline_monthly_profit = 22 * 5 * avg_without_boss.mean() * profit_per_car

# Scenario 1: Random visits (current pattern)
current_boost = summary_pivot['Boost'].mean()  # average boost across shops

# Scenario 2: Focus on Shop 1 & 4 (best shops)
best_boost = (summary_pivot.loc[1, 'Boost'] + summary_pivot.loc[4, 'Boost']) / 2

# Scenario 3: Only visit Shop 3 (brother's shop)
brother_boost = summary_pivot.loc[3, 'Boost']

# Scenario 4: Never visit (baseline)
no_visit_boost = 0

# Calculate EXTRA monthly profits from visits (above baseline)
scenarios = {
    'Never Visit\n(Baseline)': no_visit_boost * 22 * profit_per_car,
    'Random Visits\n(Current)': current_boost * 22 * profit_per_car,
    "Brother's Shop\n(Shop 3 Only)": brother_boost * 22 * profit_per_car,
    'Optimal Strategy\n(Shop 1 & 4)': best_boost * 22 * profit_per_car
}

fig, ax = plt.subplots(figsize=(9, 7))

colors_scenario = ['#E74C3C', '#F39C12', '#3498DB', '#27AE60']
bars = ax.bar(scenarios.keys(), scenarios.values(), 
              color=colors_scenario, edgecolor='black', linewidth=1.5)

ax.set_ylabel('Extra Monthly Profit ($)', fontsize=12, fontweight='bold')
ax.set_title('Extra Profit from Different Scheduling Strategies', 
             fontsize=14, fontweight='bold')

# Add dollar labels
for bar in bars:
    height = bar.get_height()
    label = f'${height:,.0f}'
    ax.annotate(label, xy=(bar.get_x() + bar.get_width()/2, height),
                xytext=(0, 5), textcoords='offset points',
                ha='center', fontsize=14, fontweight='bold')

# Format y-axis with dollar signs and K notation
ax.yaxis.set_major_formatter(plt.FuncFormatter(lambda x, p: f'${x/1000:.0f}K'))
ax.set_ylim(0, max(scenarios.values()) * 1.25)

plt.tight_layout()
plt.show()
```

**Translation:**

- üéØ **Optimal Strategy (Shop 1 & 4):** Could add ~$43,100/month in extra profit
- üìä **Random Visits:** ~$36,900/month in extra profit
- ü§ù **Brother's Shop Only:** ~$15,000/month‚Äîyou'd be leaving money on the table
- ‚ùå **Never Visit:** $0 extra‚Äîjust baseline performance

---

## Your Action Plan üìã

Based on 250 days of data, here's what we recommend:

### Priority Schedule

| Priority | Shop | Days/Week | Why |
|----------|------|-----------|-----|
| **ü•á High** | Shop 4 | 2-3 days | +12.6 cars/day boost. They need you most! |
| **ü•à High** | Shop 1 | 2-3 days | +7.0 cars/day boost. Strong impact here too. |
| **ü•â Medium** | Shop 5 | 1 day | +8.8 cars/day boost, and already performs well. |
| **‚è∏Ô∏è Low** | Shop 3 | Occasional | Your brother runs it fine. Visit socially! |
| **üìä Watch** | Shop 2 | TBD | +10.1 boost but only 5 days of data‚Äîtrack more visits. |

### What Could Go Wrong?

Let's be honest about the limitations:

1. **Sample size:** 250 days isn't huge. Patterns could shift.
2. **Shop 2 data:** We only have 5 days of you being there. The +10.1 boost looks great, but it might not hold up.
3. **Other factors:** We don't know why your presence helps. Is it motivation? Oversight? Problem-solving? If something changes, the pattern could change.
4. **Seasonality:** We don't know if certain times of year are different.

### One Final Chart: The Boss Presence Effect in 3D

```{python}
#| fig-cap: "3D visualization showing how boss presence lifts productivity at each shop"
#| fig-width: 10
#| fig-height: 7

from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure(figsize=(10, 7))
ax = fig.add_subplot(111, projection='3d')

# Calculate average cars fixed for each shop-boss combination
shops = [1, 2, 3, 4, 5]
boss_away_means = []
boss_present_means = []

for shop in shops:
    away_mean = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 0)]['carsFixed'].mean()
    present_mean = carsDF[(carsDF['shopID'] == shop) & (carsDF['boss'] == 1)]['carsFixed'].mean()
    boss_away_means.append(away_mean)
    boss_present_means.append(present_mean)

# Create 3D bar chart
bar_width = 0.35
bar_depth = 0.5

# Boss Away bars (y=0)
x_away = np.array(shops) - bar_width/2
y_away = np.zeros(5)
z_away = np.zeros(5)
dx = np.ones(5) * bar_width
dy = np.ones(5) * bar_depth
dz_away = boss_away_means

ax.bar3d(x_away, y_away, z_away, dx, dy, dz_away, 
         color='#E67E22', alpha=0.85, edgecolor='black', linewidth=0.8, label='Boss Away')

# Boss Present bars (y=1)
x_present = np.array(shops) - bar_width/2
y_present = np.ones(5) * 1.0
z_present = np.zeros(5)
dz_present = boss_present_means

ax.bar3d(x_present, y_present, z_present, dx, dy, dz_present, 
         color='#27AE60', alpha=0.85, edgecolor='black', linewidth=0.8, label='Boss Present')

# Add boost arrows/connectors to show the lift
for i, shop in enumerate(shops):
    boost = boss_present_means[i] - boss_away_means[i]
    # Draw arrow from top of "away" bar to top of "present" bar
    ax.plot([shop, shop], [0.25, 1.25], [boss_away_means[i], boss_present_means[i]], 
            color='#2C3E50', linewidth=2, linestyle='--', alpha=0.7)
    # Add boost label
    mid_y = 0.75
    mid_z = (boss_away_means[i] + boss_present_means[i]) / 2
    ax.text(shop + 0.3, mid_y, mid_z + 3, f'+{boost:.1f}', 
            fontsize=9, fontweight='bold', color='#2C3E50', ha='center')

# Set labels and title
ax.set_xlabel('\nShop', fontsize=11, fontweight='bold')
ax.set_ylabel('\nBoss Presence', fontsize=11, fontweight='bold')
ax.set_zlabel('\nAvg Cars Fixed/Day', fontsize=11, fontweight='bold')
ax.set_title('The Boss Presence Effect: Productivity Lift by Shop', 
             fontsize=14, fontweight='bold', pad=15)

# Set tick labels
ax.set_xticks(shops)
ax.set_xticklabels(['Shop 1', 'Shop 2', 'Shop 3', 'Shop 4', 'Shop 5'])
ax.set_yticks([0.25, 1.25])
ax.set_yticklabels(['Away', 'Present'])
ax.set_zlim(0, 70)

# Create custom legend
from matplotlib.patches import Patch
legend_elements = [Patch(facecolor='#E67E22', edgecolor='black', label='Boss Away'),
                   Patch(facecolor='#27AE60', edgecolor='black', label='Boss Present')]
ax.legend(handles=legend_elements, loc='upper left', fontsize=10)

# Adjust view angle for best visualization
ax.view_init(elev=25, azim=135)

plt.tight_layout()
plt.show()
```

---

## Summary

**Patrick, here's what you need to remember:**

Question 1. **Your presence matters‚Äîbut not equally everywhere.** Shop 1 and Shop 4 see the biggest boost when you're there.

**Answer:** The data clearly demonstrates this: Shop 4 shows a +12.6 cars/day boost and Shop 1 shows a +7.0 cars/day boost when you're present. In contrast, Shop 3 (your brother's shop) only shows a +3.4 cars/day improvement, while Shop 5 shows +8.8 and Shop 2 shows +10.1 (though with limited data). Your time investment yields vastly different returns depending on where you spend it.

Question 2. **Focus your time wisely.** Split your week between Shop 1 and Shop 4 for maximum impact. Don't feel guilty about visiting your brother less‚ÄîShop 3 does fine without you.

**Answer:** The recommended schedule is to spend 2-3 days per week at Shop 4 and 2-3 days per week at Shop 1. Shop 3, managed by your brother, performs adequately without your oversight‚Äîthe minimal +3.4 cars/day boost there means your time is better spent elsewhere. Visit Shop 3 socially, not for productivity reasons.

Question 3. **The potential gain is real.** Following this strategy could add ~$43,000+ per month compared to no visits.

**Answer:** At $200 profit per car, the optimal strategy (focusing on Shop 4 & 1) projects approximately $43,100/month in extra profit. Random visits yield roughly $36,900/month extra, while only visiting your brother's shop would generate just $15,000/month extra. The focused approach could generate roughly $6,200 more per month than random visits, translating to over $74,000 in additional annual profit.

Question 4. **Keep tracking.** This analysis is based on 250 days. The more data you collect, the more confident we can be.

**Answer:** The current analysis has limitations: only 250 total days of data, and Shop 2 has just 5 days where you were present (making that +10.1 boost estimate unreliable). Continued tracking will help validate whether these patterns hold, account for seasonal variations, and improve confidence in the recommendations. Consider systematically visiting Shop 2 more often to gather better data there.

**Questions?** The data speaks clearly: prioritize where your presence makes the biggest difference.

---

*Analysis based on 250 days of productivity data across 5 shops.*
